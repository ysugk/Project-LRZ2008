
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
  Statistics/Data analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        https://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Stata license: Single-user , expiring  5 Jul 2021
Serial number: 401609700731
  Licensed to: Yongseok Kim
               Indiana University Bloomington

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.
      3. Maximum number of variables is set to 5,000; see help set_maxvar.

. do draw_figure2.do 

. clear all

. set more off

. set graphics off

. 
. cd "~/Projects/Replication/LRZ2008"
/Users/apple/Projects/Replication/LRZ2008

. 
. /* Figure 2: Panel A */
. use "analysis/input/prepared", clear

. 
. tsset gvkey fyear
       panel variable:  gvkey (unbalanced)
        time variable:  fyear, 1965 to 2003, but with gaps
                delta:  1 unit

. 
. foreach year of num 1966/2003 {
  2.         preserve
  3.         qui reghdfe blev L.size L.prof L.tang L.mtb if fyear == `year', a(
> ffind) res
  4.         predict res, r
  5.         egen levport = cut(res) if fyear == `year', group(4)
  6.         replace levport = levport[_n - 1] if (gvkey == gvkey[_n - 1]) & mi
> ssing(levport)
  7.         gen eventtime = fyear - `year'
  8.         collapse (mean) blev`year' = blev (semean) ste`year' = blev, by(ev
> enttime levport)
  9.         drop if missing(levport)
 10.         keep if inrange(eventtime, 0, 20)
 11.         save analysis/temp/levport`year', replace
 12.         restore
 13. }
insufficient observations
r(2001);

end of do-file
r(2001);
