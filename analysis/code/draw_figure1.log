
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
     Special Edition                  College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user Stata license expires  5 Jul 2021:
       Serial number:  401609700731
         Licensed to:  Yongseok Kim
                       Indiana University Bloomington

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.
      3.  Maximum number of variables is set to 5000; see help set_maxvar.

. do draw_figure1.do 

. clear all

. set more off

. set graphics off

. 
. cd "~/Projects/Replication/LRZ2008"
/Users/apple/Projects/Replication/LRZ2008

. 
. /* Figure 1: Panel A */
. use "analysis/input/prepared", clear

. 
. foreach year of num 1965/2003 {
  2.         preserve
  3.         keep if inrange(fyear, `year', `year' + 20)
  4.         egen levport = cut(blev) if fyear == `year', group(4)
  5.         replace levport = levport[_n - 1] if (gvkey == gvkey[_n - 1]) & mi
> ssing(levport)
  6.         gen eventtime = fyear - `year'
  7.         collapse (mean) blev`year' = blev (semean) ste`year' = blev, by(ev
> enttime levport)
  8.         drop if missing(levport)
  9.         save analysis/temp/levport`year', replace
 10.         restore
 11. }
(144,524 observations deleted)
(100,092 missing values generated)
(21,283 real changes made)
(21 observations deleted)
file analysis/temp/levport1965.dta saved
(140,286 observations deleted)
(104,166 missing values generated)
(21,628 real changes made)
(21 observations deleted)
file analysis/temp/levport1966.dta saved
(136,182 observations deleted)
(108,068 missing values generated)
(22,764 real changes made)
(21 observations deleted)
file analysis/temp/levport1967.dta saved
(132,429 observations deleted)
(111,207 missing values generated)
(25,779 real changes made)
(21 observations deleted)
file analysis/temp/levport1968.dta saved
(129,402 observations deleted)
(114,027 missing values generated)
(25,591 real changes made)
(21 observations deleted)
file analysis/temp/levport1969.dta saved
(126,508 observations deleted)
(116,747 missing values generated)
(25,545 real changes made)
(21 observations deleted)
file analysis/temp/levport1970.dta saved
(123,499 observations deleted)
(119,652 missing values generated)
(25,939 real changes made)
(21 observations deleted)
file analysis/temp/levport1971.dta saved
(120,214 observations deleted)
(122,851 missing values generated)
(26,188 real changes made)
(21 observations deleted)
file analysis/temp/levport1972.dta saved
(116,538 observations deleted)
(126,169 missing values generated)
(28,214 real changes made)
(21 observations deleted)
file analysis/temp/levport1973.dta saved
(112,753 observations deleted)
(128,672 missing values generated)
(35,132 real changes made)
(21 observations deleted)
file analysis/temp/levport1974.dta saved
(109,387 observations deleted)
(132,013 missing values generated)
(34,274 real changes made)
(21 observations deleted)
file analysis/temp/levport1975.dta saved
(105,860 observations deleted)
(135,541 missing values generated)
(32,876 real changes made)
(21 observations deleted)
file analysis/temp/levport1976.dta saved
(102,503 observations deleted)
(138,886 missing values generated)
(32,462 real changes made)
(21 observations deleted)
file analysis/temp/levport1977.dta saved
(98,781 observations deleted)
(142,755 missing values generated)
(31,642 real changes made)
(21 observations deleted)
file analysis/temp/levport1978.dta saved
(94,835 observations deleted)
(146,799 missing values generated)
(29,883 real changes made)
(21 observations deleted)
file analysis/temp/levport1979.dta saved
(91,151 observations deleted)
(150,411 missing values generated)
(31,021 real changes made)
(21 observations deleted)
file analysis/temp/levport1980.dta saved
(88,076 observations deleted)
(153,451 missing values generated)
(30,531 real changes made)
(21 observations deleted)
file analysis/temp/levport1981.dta saved
(85,393 observations deleted)
(155,784 missing values generated)
(32,417 real changes made)
(21 observations deleted)
file analysis/temp/levport1982.dta saved
(83,339 observations deleted)
(157,586 missing values generated)
(33,278 real changes made)
(21 observations deleted)
file analysis/temp/levport1983.dta saved
(89,588 observations deleted)
(151,324 missing values generated)
(32,466 real changes made)
(20 observations deleted)
file analysis/temp/levport1984.dta saved
(95,874 observations deleted)
(144,712 missing values generated)
(33,734 real changes made)
(19 observations deleted)
file analysis/temp/levport1985.dta saved
(102,530 observations deleted)
(137,802 missing values generated)
(33,533 real changes made)
(18 observations deleted)
file analysis/temp/levport1986.dta saved
(109,462 observations deleted)
(130,829 missing values generated)
(32,628 real changes made)
(17 observations deleted)
file analysis/temp/levport1987.dta saved
(116,429 observations deleted)
(124,040 missing values generated)
(30,563 real changes made)
(16 observations deleted)
file analysis/temp/levport1988.dta saved
(123,229 observations deleted)
(117,379 missing values generated)
(29,211 real changes made)
(15 observations deleted)
file analysis/temp/levport1989.dta saved
(129,900 observations deleted)
(110,713 missing values generated)
(28,324 real changes made)
(14 observations deleted)
file analysis/temp/levport1990.dta saved
(136,585 observations deleted)
(103,896 missing values generated)
(27,087 real changes made)
(13 observations deleted)
file analysis/temp/levport1991.dta saved
(143,407 observations deleted)
(96,701 missing values generated)
(26,251 real changes made)
(12 observations deleted)
file analysis/temp/levport1992.dta saved
(150,612 observations deleted)
(88,998 missing values generated)
(25,965 real changes made)
(11 observations deleted)
file analysis/temp/levport1993.dta saved
(158,291 observations deleted)
(80,841 missing values generated)
(24,745 real changes made)
(10 observations deleted)
file analysis/temp/levport1994.dta saved
(166,437 observations deleted)
(71,862 missing values generated)
(24,594 real changes made)
(9 observations deleted)
file analysis/temp/levport1995.dta saved
(175,490 observations deleted)
(62,590 missing values generated)
(22,395 real changes made)
(8 observations deleted)
file analysis/temp/levport1996.dta saved
(184,746 observations deleted)
(53,520 missing values generated)
(19,158 real changes made)
(7 observations deleted)
file analysis/temp/levport1997.dta saved
(193,842 observations deleted)
(44,151 missing values generated)
(16,839 real changes made)
(6 observations deleted)
file analysis/temp/levport1998.dta saved
(203,324 observations deleted)
(34,606 missing values generated)
(14,283 real changes made)
(5 observations deleted)
file analysis/temp/levport1999.dta saved
(212,878 observations deleted)
(25,469 missing values generated)
(10,684 real changes made)
(4 observations deleted)
file analysis/temp/levport2000.dta saved
(222,059 observations deleted)
(16,890 missing values generated)
(7,053 real changes made)
(3 observations deleted)
file analysis/temp/levport2001.dta saved
(230,706 observations deleted)
(8,631 missing values generated)
(3,595 real changes made)
(2 observations deleted)
file analysis/temp/levport2002.dta saved
(238,995 observations deleted)
(538 missing values generated)
(0 real changes made)
(1 observation deleted)
file analysis/temp/levport2003.dta saved

. 
. use "analysis/temp/levport1965", clear

. 
. foreach year of num 1966/2003 {
  2.         merge 1:1 eventtime levport using analysis/temp/levport`year'
  3.         drop _merge
  4. }

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             4
        from master                         4  (_merge==1)
        from using                          0  (_merge==2)

    matched                                80  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             8
        from master                         8  (_merge==1)
        from using                          0  (_merge==2)

    matched                                76  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            12
        from master                        12  (_merge==1)
        from using                          0  (_merge==2)

    matched                                72  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            16
        from master                        16  (_merge==1)
        from using                          0  (_merge==2)

    matched                                68  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            20
        from master                        20  (_merge==1)
        from using                          0  (_merge==2)

    matched                                64  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            24
        from master                        24  (_merge==1)
        from using                          0  (_merge==2)

    matched                                60  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            28
        from master                        28  (_merge==1)
        from using                          0  (_merge==2)

    matched                                56  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            32
        from master                        32  (_merge==1)
        from using                          0  (_merge==2)

    matched                                52  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            36
        from master                        36  (_merge==1)
        from using                          0  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            40
        from master                        40  (_merge==1)
        from using                          0  (_merge==2)

    matched                                44  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            44
        from master                        44  (_merge==1)
        from using                          0  (_merge==2)

    matched                                40  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            48
        from master                        48  (_merge==1)
        from using                          0  (_merge==2)

    matched                                36  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            52
        from master                        52  (_merge==1)
        from using                          0  (_merge==2)

    matched                                32  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            56
        from master                        56  (_merge==1)
        from using                          0  (_merge==2)

    matched                                28  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            60
        from master                        60  (_merge==1)
        from using                          0  (_merge==2)

    matched                                24  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            64
        from master                        64  (_merge==1)
        from using                          0  (_merge==2)

    matched                                20  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            68
        from master                        68  (_merge==1)
        from using                          0  (_merge==2)

    matched                                16  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            72
        from master                        72  (_merge==1)
        from using                          0  (_merge==2)

    matched                                12  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            76
        from master                        76  (_merge==1)
        from using                          0  (_merge==2)

    matched                                 8  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            80
        from master                        80  (_merge==1)
        from using                          0  (_merge==2)

    matched                                 4  (_merge==3)
    -----------------------------------------

. 
. egen p = rowmean(blev*)

. egen ste = rowmean(ste*)

. gen pupper = p + ste

. gen plower = p - ste

. 
. twoway  ///
> (scatter p eventtime if levport == 0, con(l)) ///
> (line pupper eventtime if levport == 0, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 0, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 1, con(l)) ///
> (line pupper eventtime if levport == 1, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 1, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 2, con(l)) ///
> (line pupper eventtime if levport == 2, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 2, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 3, con(l)) ///
> (line pupper eventtime if levport == 3, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 3, lp(dash) lc(gs10)), ///
> legend(label(1 "Low") label(4 "Medium") label(7 "High") label(10 "Very High")
>  rows(1) pos(12) size(vsmall)) ///
> legend(order(1 4 7 10)) ///
> xtitle("Event Time (Years)") ytitle("Book Leverage") ///
> yscale(range(0 0.7)) ylabel(0(0.1)0.7) ///
> xscale(range(0 20)) xlabel(0(1)20)

. 
. graph export "analysis/output/fig/fig1a.pdf", replace
(file analysis/output/fig/fig1a.pdf written in PDF format)

. 
. /* Figure 1: Panel B */
. use "analysis/input/prepared", clear

. keep if survivor == 1
(144,376 observations deleted)

. 
. foreach year of num 1965/1984 {
  2.         preserve
  3.         keep if inrange(fyear, `year', `year' + 20)
  4.         egen levport = cut(blev) if fyear == `year', group(4)
  5.         replace levport = levport[_n - 1] if (gvkey == gvkey[_n - 1]) & mi
> ssing(levport)
  6.         gen eventtime = fyear - `year'
  7.         collapse (mean) blev`year' = blev (semean) ste`year' = blev, by(ev
> enttime levport)
  8.         drop if missing(levport)
  9.         save analysis/temp/levport`year', replace
 10.         restore
 11. }
(48,252 observations deleted)
(52,851 missing values generated)
(15,980 real changes made)
(21 observations deleted)
file analysis/temp/levport1965.dta saved
(46,493 observations deleted)
(54,526 missing values generated)
(16,214 real changes made)
(21 observations deleted)
file analysis/temp/levport1966.dta saved
(44,894 observations deleted)
(56,040 missing values generated)
(17,049 real changes made)
(21 observations deleted)
file analysis/temp/levport1967.dta saved
(43,457 observations deleted)
(57,302 missing values generated)
(19,155 real changes made)
(21 observations deleted)
file analysis/temp/levport1968.dta saved
(42,277 observations deleted)
(58,413 missing values generated)
(19,168 real changes made)
(21 observations deleted)
file analysis/temp/levport1969.dta saved
(41,238 observations deleted)
(59,400 missing values generated)
(19,473 real changes made)
(21 observations deleted)
file analysis/temp/levport1970.dta saved
(40,293 observations deleted)
(60,271 missing values generated)
(19,879 real changes made)
(21 observations deleted)
file analysis/temp/levport1971.dta saved
(39,447 observations deleted)
(61,053 missing values generated)
(20,310 real changes made)
(21 observations deleted)
file analysis/temp/levport1972.dta saved
(38,727 observations deleted)
(61,613 missing values generated)
(21,456 real changes made)
(21 observations deleted)
file analysis/temp/levport1973.dta saved
(38,230 observations deleted)
(61,758 missing values generated)
(24,857 real changes made)
(21 observations deleted)
file analysis/temp/levport1974.dta saved
(38,191 observations deleted)
(61,738 missing values generated)
(25,412 real changes made)
(21 observations deleted)
file analysis/temp/levport1975.dta saved
(38,304 observations deleted)
(61,584 missing values generated)
(24,639 real changes made)
(21 observations deleted)
file analysis/temp/levport1976.dta saved
(38,551 observations deleted)
(61,287 missing values generated)
(25,255 real changes made)
(21 observations deleted)
file analysis/temp/levport1977.dta saved
(38,988 observations deleted)
(60,813 missing values generated)
(25,111 real changes made)
(21 observations deleted)
file analysis/temp/levport1978.dta saved
(39,600 observations deleted)
(60,151 missing values generated)
(24,156 real changes made)
(21 observations deleted)
file analysis/temp/levport1979.dta saved
(40,420 observations deleted)
(59,233 missing values generated)
(25,499 real changes made)
(21 observations deleted)
file analysis/temp/levport1980.dta saved
(41,442 observations deleted)
(58,138 missing values generated)
(25,201 real changes made)
(21 observations deleted)
file analysis/temp/levport1981.dta saved
(42,628 observations deleted)
(56,792 missing values generated)
(25,858 real changes made)
(21 observations deleted)
file analysis/temp/levport1982.dta saved
(44,080 observations deleted)
(55,225 missing values generated)
(26,454 real changes made)
(21 observations deleted)
file analysis/temp/levport1983.dta saved
(47,489 observations deleted)
(51,717 missing values generated)
(25,422 real changes made)
(20 observations deleted)
file analysis/temp/levport1984.dta saved

. 
. use "analysis/temp/levport1965", clear

. 
. foreach year of num 1965/1984 {
  2.         merge 1:1 eventtime levport using analysis/temp/levport`year'
  3.         drop _merge
  4. }

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             4
        from master                         4  (_merge==1)
        from using                          0  (_merge==2)

    matched                                80  (_merge==3)
    -----------------------------------------

. 
. egen p = rowmean(blev*)

. egen ste = rowmean(ste*)

. gen pupper = p + ste

. gen plower = p - ste

. 
. twoway  ///
> (scatter p eventtime if levport == 0, con(l)) ///
> (line pupper eventtime if levport == 0, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 0, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 1, con(l)) ///
> (line pupper eventtime if levport == 1, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 1, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 2, con(l)) ///
> (line pupper eventtime if levport == 2, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 2, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 3, con(l)) ///
> (line pupper eventtime if levport == 3, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 3, lp(dash) lc(gs10)), ///
> legend(label(1 "Low") label(4 "Medium") label(7 "High") label(10 "Very High")
>  rows(1) pos(12) size(vsmall)) ///
> legend(order(1 4 7 10)) ///
> xtitle("Event Time (Years)") ytitle("Book Leverage") ///
> yscale(range(0 0.7)) ylabel(0(0.1)0.7) ///
> xscale(range(0 20)) xlabel(0(1)20)

. 
. graph export "analysis/output/fig/fig1b.pdf", replace
(file analysis/output/fig/fig1b.pdf written in PDF format)

. 
. /* Figure 1: Panel C */
. use "analysis/input/prepared", clear

. 
. foreach year of num 1965/2003 {
  2.         preserve
  3.         keep if inrange(fyear, `year', `year' + 20)
  4.         egen levport = cut(mlev) if fyear == `year', group(4)
  5.         replace levport = levport[_n - 1] if (gvkey == gvkey[_n - 1]) & mi
> ssing(levport)
  6.         gen eventtime = fyear - `year'
  7.         collapse (mean) mlev`year' = mlev (semean) ste`year' = mlev, by(ev
> enttime levport)
  8.         drop if missing(levport)
  9.         save analysis/temp/levport`year', replace
 10.         restore
 11. }
(144,524 observations deleted)
(101,537 missing values generated)
(9,400 real changes made)
(21 observations deleted)
file analysis/temp/levport1965.dta saved
(140,286 observations deleted)
(105,132 missing values generated)
(14,365 real changes made)
(21 observations deleted)
file analysis/temp/levport1966.dta saved
(136,182 observations deleted)
(109,097 missing values generated)
(15,448 real changes made)
(21 observations deleted)
file analysis/temp/levport1967.dta saved
(132,429 observations deleted)
(112,396 missing values generated)
(18,900 real changes made)
(21 observations deleted)
file analysis/temp/levport1968.dta saved
(129,402 observations deleted)
(115,172 missing values generated)
(19,414 real changes made)
(21 observations deleted)
file analysis/temp/levport1969.dta saved
(126,508 observations deleted)
(117,608 missing values generated)
(20,846 real changes made)
(21 observations deleted)
file analysis/temp/levport1970.dta saved
(123,499 observations deleted)
(120,342 missing values generated)
(22,096 real changes made)
(21 observations deleted)
file analysis/temp/levport1971.dta saved
(120,214 observations deleted)
(123,407 missing values generated)
(23,042 real changes made)
(21 observations deleted)
file analysis/temp/levport1972.dta saved
(116,538 observations deleted)
(127,009 missing values generated)
(22,899 real changes made)
(21 observations deleted)
file analysis/temp/levport1973.dta saved
(112,753 observations deleted)
(130,770 missing values generated)
(22,642 real changes made)
(21 observations deleted)
file analysis/temp/levport1974.dta saved
(109,387 observations deleted)
(134,183 missing values generated)
(22,239 real changes made)
(21 observations deleted)
file analysis/temp/levport1975.dta saved
(105,860 observations deleted)
(137,737 missing values generated)
(21,343 real changes made)
(21 observations deleted)
file analysis/temp/levport1976.dta saved
(102,503 observations deleted)
(141,128 missing values generated)
(21,425 real changes made)
(21 observations deleted)
file analysis/temp/levport1977.dta saved
(98,781 observations deleted)
(144,694 missing values generated)
(22,316 real changes made)
(21 observations deleted)
file analysis/temp/levport1978.dta saved
(94,835 observations deleted)
(148,376 missing values generated)
(22,519 real changes made)
(21 observations deleted)
file analysis/temp/levport1979.dta saved
(91,151 observations deleted)
(151,865 missing values generated)
(23,746 real changes made)
(21 observations deleted)
file analysis/temp/levport1980.dta saved
(88,076 observations deleted)
(154,387 missing values generated)
(25,941 real changes made)
(21 observations deleted)
file analysis/temp/levport1981.dta saved
(85,393 observations deleted)
(156,844 missing values generated)
(27,011 real changes made)
(21 observations deleted)
file analysis/temp/levport1982.dta saved
(83,339 observations deleted)
(158,544 missing values generated)
(28,531 real changes made)
(21 observations deleted)
file analysis/temp/levport1983.dta saved
(89,588 observations deleted)
(152,215 missing values generated)
(27,994 real changes made)
(20 observations deleted)
file analysis/temp/levport1984.dta saved
(95,874 observations deleted)
(145,933 missing values generated)
(27,530 real changes made)
(19 observations deleted)
file analysis/temp/levport1985.dta saved
(102,530 observations deleted)
(139,109 missing values generated)
(27,387 real changes made)
(18 observations deleted)
file analysis/temp/levport1986.dta saved
(109,462 observations deleted)
(131,949 missing values generated)
(27,724 real changes made)
(17 observations deleted)
file analysis/temp/levport1987.dta saved
(116,429 observations deleted)
(125,246 missing values generated)
(25,435 real changes made)
(16 observations deleted)
file analysis/temp/levport1988.dta saved
(123,229 observations deleted)
(118,581 missing values generated)
(24,495 real changes made)
(15 observations deleted)
file analysis/temp/levport1989.dta saved
(129,900 observations deleted)
(111,956 missing values generated)
(23,424 real changes made)
(14 observations deleted)
file analysis/temp/levport1990.dta saved
(136,585 observations deleted)
(105,207 missing values generated)
(22,116 real changes made)
(13 observations deleted)
file analysis/temp/levport1991.dta saved
(143,407 observations deleted)
(98,135 missing values generated)
(21,160 real changes made)
(12 observations deleted)
file analysis/temp/levport1992.dta saved
(150,612 observations deleted)
(90,431 missing values generated)
(21,220 real changes made)
(11 observations deleted)
file analysis/temp/levport1993.dta saved
(158,291 observations deleted)
(82,337 missing values generated)
(20,229 real changes made)
(10 observations deleted)
file analysis/temp/levport1994.dta saved
(166,437 observations deleted)
(73,485 missing values generated)
(20,082 real changes made)
(9 observations deleted)
file analysis/temp/levport1995.dta saved
(175,490 observations deleted)
(63,795 missing values generated)
(19,277 real changes made)
(8 observations deleted)
file analysis/temp/levport1996.dta saved
(184,746 observations deleted)
(54,404 missing values generated)
(17,076 real changes made)
(7 observations deleted)
file analysis/temp/levport1997.dta saved
(193,842 observations deleted)
(45,344 missing values generated)
(14,503 real changes made)
(6 observations deleted)
file analysis/temp/levport1998.dta saved
(203,324 observations deleted)
(35,631 missing values generated)
(12,653 real changes made)
(5 observations deleted)
file analysis/temp/levport1999.dta saved
(212,878 observations deleted)
(26,097 missing values generated)
(9,845 real changes made)
(4 observations deleted)
file analysis/temp/levport2000.dta saved
(222,059 observations deleted)
(17,357 missing values generated)
(6,618 real changes made)
(3 observations deleted)
file analysis/temp/levport2001.dta saved
(230,706 observations deleted)
(9,098 missing values generated)
(3,378 real changes made)
(2 observations deleted)
file analysis/temp/levport2002.dta saved
(238,995 observations deleted)
(1,122 missing values generated)
(0 real changes made)
(1 observation deleted)
file analysis/temp/levport2003.dta saved

. 
. use "analysis/temp/levport1965", clear

. 
. foreach year of num 1966/2003 {
  2.         merge 1:1 eventtime levport using analysis/temp/levport`year'
  3.         drop _merge
  4. }

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             4
        from master                         4  (_merge==1)
        from using                          0  (_merge==2)

    matched                                80  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             8
        from master                         8  (_merge==1)
        from using                          0  (_merge==2)

    matched                                76  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            12
        from master                        12  (_merge==1)
        from using                          0  (_merge==2)

    matched                                72  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            16
        from master                        16  (_merge==1)
        from using                          0  (_merge==2)

    matched                                68  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            20
        from master                        20  (_merge==1)
        from using                          0  (_merge==2)

    matched                                64  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            24
        from master                        24  (_merge==1)
        from using                          0  (_merge==2)

    matched                                60  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            28
        from master                        28  (_merge==1)
        from using                          0  (_merge==2)

    matched                                56  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            32
        from master                        32  (_merge==1)
        from using                          0  (_merge==2)

    matched                                52  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            36
        from master                        36  (_merge==1)
        from using                          0  (_merge==2)

    matched                                48  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            40
        from master                        40  (_merge==1)
        from using                          0  (_merge==2)

    matched                                44  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            44
        from master                        44  (_merge==1)
        from using                          0  (_merge==2)

    matched                                40  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            48
        from master                        48  (_merge==1)
        from using                          0  (_merge==2)

    matched                                36  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            52
        from master                        52  (_merge==1)
        from using                          0  (_merge==2)

    matched                                32  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            56
        from master                        56  (_merge==1)
        from using                          0  (_merge==2)

    matched                                28  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            60
        from master                        60  (_merge==1)
        from using                          0  (_merge==2)

    matched                                24  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            64
        from master                        64  (_merge==1)
        from using                          0  (_merge==2)

    matched                                20  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            68
        from master                        68  (_merge==1)
        from using                          0  (_merge==2)

    matched                                16  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            72
        from master                        72  (_merge==1)
        from using                          0  (_merge==2)

    matched                                12  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            76
        from master                        76  (_merge==1)
        from using                          0  (_merge==2)

    matched                                 8  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                            80
        from master                        80  (_merge==1)
        from using                          0  (_merge==2)

    matched                                 4  (_merge==3)
    -----------------------------------------

. 
. egen p = rowmean(mlev*)

. egen ste = rowmean(ste*)

. gen pupper = p + ste

. gen plower = p - ste

. 
. twoway  ///
> (scatter p eventtime if levport == 0, con(l)) ///
> (line pupper eventtime if levport == 0, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 0, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 1, con(l)) ///
> (line pupper eventtime if levport == 1, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 1, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 2, con(l)) ///
> (line pupper eventtime if levport == 2, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 2, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 3, con(l)) ///
> (line pupper eventtime if levport == 3, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 3, lp(dash) lc(gs10)), ///
> legend(label(1 "Low") label(4 "Medium") label(7 "High") label(10 "Very High")
>  rows(1) pos(12) size(vsmall)) ///
> legend(order(1 4 7 10)) ///
> xtitle("Event Time (Years)") ytitle("Market Leverage") ///
> yscale(range(0 0.7)) ylabel(0(0.1)0.7) ///
> xscale(range(0 20)) xlabel(0(1)20)

. 
. graph export "analysis/output/fig/fig1c.pdf", replace
(file analysis/output/fig/fig1c.pdf written in PDF format)

. 
. /* Figure 1: Panel D */
. use "analysis/input/prepared", clear

. keep if survivor == 1
(144,376 observations deleted)

. 
. foreach year of num 1965/1984 {
  2.         preserve
  3.         keep if inrange(fyear, `year', `year' + 20)
  4.         egen levport = cut(mlev) if fyear == `year', group(4)
  5.         replace levport = levport[_n - 1] if (gvkey == gvkey[_n - 1]) & mi
> ssing(levport)
  6.         gen eventtime = fyear - `year'
  7.         collapse (mean) mlev`year' = mlev (semean) ste`year' = mlev, by(ev
> enttime levport)
  8.         drop if missing(levport)
  9.         save analysis/temp/levport`year', replace
 10.         restore
 11. }
(48,252 observations deleted)
(53,663 missing values generated)
(7,833 real changes made)
(21 observations deleted)
file analysis/temp/levport1965.dta saved
(46,493 observations deleted)
(55,016 missing values generated)
(11,395 real changes made)
(21 observations deleted)
file analysis/temp/levport1966.dta saved
(44,894 observations deleted)
(56,542 missing values generated)
(12,266 real changes made)
(21 observations deleted)
file analysis/temp/levport1967.dta saved
(43,457 observations deleted)
(57,740 missing values generated)
(14,956 real changes made)
(21 observations deleted)
file analysis/temp/levport1968.dta saved
(42,277 observations deleted)
(58,823 missing values generated)
(15,324 real changes made)
(21 observations deleted)
file analysis/temp/levport1969.dta saved
(41,238 observations deleted)
(59,742 missing values generated)
(16,212 real changes made)
(21 observations deleted)
file analysis/temp/levport1970.dta saved
(40,293 observations deleted)
(60,571 missing values generated)
(17,121 real changes made)
(21 observations deleted)
file analysis/temp/levport1971.dta saved
(39,447 observations deleted)
(61,329 missing values generated)
(17,811 real changes made)
(21 observations deleted)
file analysis/temp/levport1972.dta saved
(38,727 observations deleted)
(61,963 missing values generated)
(18,122 real changes made)
(21 observations deleted)
file analysis/temp/levport1973.dta saved
(38,230 observations deleted)
(62,418 missing values generated)
(18,398 real changes made)
(21 observations deleted)
file analysis/temp/levport1974.dta saved
(38,191 observations deleted)
(62,438 missing values generated)
(18,484 real changes made)
(21 observations deleted)
file analysis/temp/levport1975.dta saved
(38,304 observations deleted)
(62,297 missing values generated)
(18,026 real changes made)
(21 observations deleted)
file analysis/temp/levport1976.dta saved
(38,551 observations deleted)
(62,005 missing values generated)
(18,605 real changes made)
(21 observations deleted)
file analysis/temp/levport1977.dta saved
(38,988 observations deleted)
(61,479 missing values generated)
(19,125 real changes made)
(21 observations deleted)
file analysis/temp/levport1978.dta saved
(39,600 observations deleted)
(60,738 missing values generated)
(19,175 real changes made)
(21 observations deleted)
file analysis/temp/levport1979.dta saved
(40,420 observations deleted)
(59,822 missing values generated)
(20,332 real changes made)
(21 observations deleted)
file analysis/temp/levport1980.dta saved
(41,442 observations deleted)
(58,593 missing values generated)
(21,648 real changes made)
(21 observations deleted)
file analysis/temp/levport1981.dta saved
(42,628 observations deleted)
(57,193 missing values generated)
(22,456 real changes made)
(21 observations deleted)
file analysis/temp/levport1982.dta saved
(44,080 observations deleted)
(55,593 missing values generated)
(23,360 real changes made)
(21 observations deleted)
file analysis/temp/levport1983.dta saved
(47,489 observations deleted)
(52,106 missing values generated)
(22,345 real changes made)
(20 observations deleted)
file analysis/temp/levport1984.dta saved

. 
. use "analysis/temp/levport1965", clear

. 
. foreach year of num 1966/1984 {
  2.         merge 1:1 eventtime levport using analysis/temp/levport`year'
  3.         drop _merge
  4. }

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                84  (_merge==3)
    -----------------------------------------

    Result                           # of obs.
    -----------------------------------------
    not matched                             4
        from master                         4  (_merge==1)
        from using                          0  (_merge==2)

    matched                                80  (_merge==3)
    -----------------------------------------

. 
. egen p = rowmean(mlev*)

. egen ste = rowmean(ste*)

. gen pupper = p + ste

. gen plower = p - ste

. 
. twoway  ///
> (scatter p eventtime if levport == 0, con(l)) ///
> (line pupper eventtime if levport == 0, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 0, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 1, con(l)) ///
> (line pupper eventtime if levport == 1, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 1, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 2, con(l)) ///
> (line pupper eventtime if levport == 2, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 2, lp(dash) lc(gs10)) ///
> ///
> (scatter p eventtime if levport == 3, con(l)) ///
> (line pupper eventtime if levport == 3, lp(dash) lc(gs10)) ///
> (line plower eventtime if levport == 3, lp(dash) lc(gs10)), ///
> legend(label(1 "Low") label(4 "Medium") label(7 "High") label(10 "Very High")
>  rows(1) pos(12) size(vsmall)) ///
> legend(order(1 4 7 10)) ///
> xtitle("Event Time (Years)") ytitle("Market Leverage") ///
> yscale(range(0 0.7)) ylabel(0(0.1)0.7) ///
> xscale(range(0 20)) xlabel(0(1)20)

. 
. graph export "analysis/output/fig/fig1d.pdf", replace
(file analysis/output/fig/fig1d.pdf written in PDF format)

. 
. 
end of do-file
